import React, { createContext, useContext, useState, useMemo, useCallback } from 'react';

const languages = ['fr', 'en', 'ar'] as const;
export type Language = typeof languages[number];

type Translations = {
  [lang in Language]: {
    [key: string]: any;
  };
};

const translations: Translations = {
  fr: {
    header: {
      title: "Assistant CV IA",
      candidateSpace: "Espace Candidat",
      recruiterSpace: "Espace Recruteur",
      logout: "Se déconnecter",
    },
    languageSwitcher: {
      language: "Langue",
    },
    home: {
      title_p1: "Votre carrière,",
      title_p2: "propulsée par l'IA",
      subtitle: "Que vous soyez candidat à la recherche de l'emploi idéal ou recruteur en quête du talent parfait, notre plateforme intelligente automatise et optimise votre parcours.",
      getStarted: "Commencer",
      login: "Se connecter",
      forCandidates: "Pour les Candidats",
      forCandidatesDesc: "Analysez votre CV, trouvez des offres pertinentes, et générez des lettres de motivation personnalisées en quelques clics.",
      candidatesFeature1: "Analyse de CV instantanée",
      candidatesFeature2: "Recherche d'emploi intelligente",
      candidatesFeature3: "Génération de lettres de motivation",
      forRecruiters: "Pour les Recruteurs",
      forRecruitersDesc: "Décrivez votre besoin et laissez notre IA sourcer les meilleurs profils du web pour vos postes ouverts.",
      recruitersFeature1: "Sourcing de talents automatisé",
      recruitersFeature2: "Accès à un vivier de candidats",
      recruitersFeature3: "Correspondance profil-poste précise",
    },
    testimonials: {
        title: "Ce qu'ils disent de nous",
        candidateQuote: "L'IA a trouvé des offres que je n'aurais jamais vues ! Le coach d'entretien m'a donné la confiance nécessaire pour réussir mes entretiens. J'ai décroché le job de mes rêves en deux semaines.",
        candidateName: "Sophie Dubois",
        candidateRole: "Développeuse Full-Stack",
        recruiterQuote: "Un gain de temps incroyable. J'ai trouvé des candidats qualifiés en quelques heures au lieu de plusieurs jours. L'outil de sourcing est devenu indispensable pour mon équipe.",
        recruiterName: "Julien Moreau",
        recruiterRole: "Recruteur Tech",
    },
    login: {
      title: "Connexion",
      emailLabel: "Adresse email",
      passwordLabel: "Mot de passe",
      submitButton: "Se connecter",
      socialSeparator: "Ou continuer avec",
      noAccount: "Pas encore de compte ?",
      signUpLink: "Inscrivez-vous",
      errorAllFields: "Veuillez remplir tous les champs.",
      errorInvalidCredentials: "Email ou mot de passe incorrect.",
      continueWith: "Continuer avec {{provider}}",
    },
    signup: {
        title: "Créer un compte",
        emailLabel: "Adresse email",
        passwordLabel: "Mot de passe",
        confirmPasswordLabel: "Confirmer le mot de passe",
        submitButton: "S'inscrire",
        socialSeparator: "Ou s'inscrire avec",
        hasAccount: "Déjà un compte ?",
        loginLink: "Connectez-vous",
        errorPasswordMismatch: "Les mots de passe ne correspondent pas.",
        errorUserExists: "Un compte avec cet email existe déjà.",
        continueWith: "S'inscrire avec {{provider}}",
    },
    hero: {
      title: "Optimisez votre recherche d'emploi",
      subtitle: "Fournissez votre CV, définissez vos critères, et laissez notre IA trouver les meilleurs postes et rédiger des lettres de motivation pour vous.",
      step1: "1. Fournissez votre CV",
      tabUpload: "Télécharger un fichier",
      tabLinkedIn: "Importer de LinkedIn",
      tabManual: "Remplir manuellement",
      dropzoneText: "Glissez-déposez votre fichier ici, ou cliquez pour sélectionner.",
      dropzoneFormats: "Formats supportés: PDF, TXT",
      parsingFile: "Analyse du fichier...",
      fileLoaded: "Fichier chargé",
      pasteCvPlaceholder: "Ou collez le contenu de votre CV ici...",
      linkedInDescription: "Entrez l'URL de votre profil LinkedIn public. Notre IA générera un CV basé sur ces informations.",
      step2: "2. Définissez votre recherche",
      locationLabel: "Ville ou région",
      locationPlaceholder: "Ex: Paris, France",
      contractTypeLabel: "Type de contrat",
      contractTypeCDI: "CDI / CDD",
      contractTypeFreelance: "Freelance",
      contractTypeSubcontracting: "Sous-traitance",
      datePostedLabel: "Date de publication",
      datePostedAny: "Indifférent",
      datePostedMonth: "Moins d'un mois",
      submitButton: "Lancer l'analyse et trouver des emplois",
      submitButtonLoading: "Chargement du CV...",
      errorLinkedInUrl: "Veuillez fournir une URL LinkedIn.",
      errorProvideCv: "Veuillez fournir un CV.",
      errorManualFormName: "Veuillez remplir au moins votre nom dans le formulaire manuel.",
      errorLocation: "Veuillez fournir une ville.",
      errorFileType: "Type de fichier non supporté. Veuillez utiliser un PDF ou un TXT.",
      errorReadFile: "Erreur lors de la lecture du fichier.",
    },
    manualCv: {
      personalInfoTitle: "Informations Personnelles",
      fullNameLabel: "Nom complet",
      emailLabel: "Email",
      phoneLabel: "Téléphone",
      linkedinUrlLabel: "URL LinkedIn",
      summarySkillsTitle: "Résumé & Compétences",
      summaryLabel: "Résumé professionnel",
      skillsLabel: "Compétences (séparées par des virgules)",
      experienceTitle: "Expérience Professionnelle",
      jobTitlePlaceholder: "Titre du poste",
      companyPlaceholder: "Entreprise",
      durationPlaceholder: "Durée (ex: 2020-2022)",
      responsibilityPlaceholder: "Responsabilité ou réalisation",
      addResponsibility: "+ Ajouter une responsabilité",
      addExperience: "+ Ajouter une expérience",
      educationTitle: "Formation",
      degreePlaceholder: "Diplôme",
      institutionPlaceholder: "Établissement",
      addEducation: "+ Ajouter une formation",
    },
    cvPreview: {
        title: "Aperçu et modèles",
        downloadAria: "Télécharger le CV en PNG",
        downloadButton: "Télécharger (PNG)",
        canvasAria: "Aperçu du CV",
    },
    loading: {
      parsing: "Analyse de votre CV...",
      findingJobs: "Recherche d'offres d'emploi...",
    },
    app: {
      errorTitle: "Erreur!",
      retryButton: "Réessayer",
    },
    results: {
      title: "Opportunités trouvées",
      newSearch: "Nouvelle Recherche",
      sourcesTitle: "Sources utilisées pour cette recherche :",
      noJobsFoundTitle: "Aucune offre d'emploi trouvée",
      noJobsFoundDescription: "Essayez de modifier vos critères de recherche ou de fournir un CV plus détaillé pour de meilleurs résultats.",
    },
    bulkActions: {
      selected: "sélectionné(s)",
      generateLetters: "Générer les lettres",
      apply: "Postuler (sites externes)",
    },
    applicationCard: {
        statusReady: "Prêt",
        statusGenerating: "Génération...",
        statusLetterReady: "Lettre prête",
        statusAwaiting: "En attente",
        statusSent: "Envoyé",
        statusError: "Erreur",
        generateLetter: "Générer la lettre",
        applicationSent: "Candidature envoyée",
        awaitingConfirmation: "Confirmation...",
        applyOnSite: "Postuler sur le site",
        seeLess: "Voir moins",
        seeMore: "Voir plus",
        source: "Source",
        viewLetter: "Lettre",
        interviewCoach: "Coach d'Entretien",
        sentConfirmation: "Candidature marquée comme envoyée.",
    },
    coverLetter: {
        title: "Lettre de Motivation",
        forPosition: "Pour le poste de",
        atCompany: "chez",
        copyButton: "Copier le texte",
        copiedButton: "Copié !",
        errorButton: "Erreur",
        closeButton: "Fermer",
    },
    confirmation: {
      title: "Confirmer la candidature",
      description1: "La page de l'offre d'emploi s'est ouverte dans un nouvel onglet pour le poste de",
      description2: "Après avoir postulé sur le site, veuillez cliquer sur le bouton ci-dessous pour confirmer que votre candidature a bien été envoyée.",
      cancelButton: "Annuler",
      confirmButton: "Candidature envoyée !",
    },
    bulkConfirmation: {
        title: "Confirmer les candidatures",
        description1_p1: "Plusieurs onglets se sont ouverts pour vous permettre de finaliser vos",
        description1_p2: "candidature(s) sur les sites des recruteurs.",
        description2: "Après avoir postulé sur chaque site, veuillez cliquer sur le bouton ci-dessous pour confirmer que vos candidatures ont bien été envoyées.",
        cancelButton: "Annuler",
        confirmButton: "Candidatures envoyées !",
    },
    recruiter: {
        title: "Trouvez les meilleurs talents",
        subtitle: "Décrivez le poste que vous cherchez à pourvoir et laissez notre IA trouver les candidats les plus pertinents pour vous.",
        jobDescriptionLabel: "Description du poste ou compétences clés",
        jobDescriptionPlaceholder: "Ex: Développeur React senior avec 5 ans d'expérience dans les applications web à grande échelle, compétent en TypeScript et GraphQL...",
        locationLabel: "Ville ou pays (optionnel)",
        locationPlaceholder: "Ex: Lyon, France",
        searchButton: "Chercher des candidats",
        searchButtonLoading: "Recherche en cours...",
        resultsTitle: "Résultats de la recherche",
        noCandidatesTitle: "Aucun candidat trouvé",
        noCandidatesDescription: "Essayez de reformuler votre recherche ou de fournir plus de détails pour de meilleurs résultats.",
        loadingTitle: "Recherche de candidats...",
        loadingDescription: "L'IA analyse le web pour trouver les meilleurs profils. Cela peut prendre un moment.",
        errorJobDescription: "Veuillez fournir une description de poste ou un titre.",
        errorUnknown: "Une erreur inconnue est survenue.",
    },
    candidateCard: {
        source: "Source",
        linkedinProfile: "Profil LinkedIn",
    },
    interview: {
        title: "Coach d'Entretien IA",
        subtitle: "Simulation pour le poste de",
        listening: "Écoute en cours...",
        start: "Démarrer la session",
        connecting: "Connexion...",
        end: "Terminer la session",
        error: "Erreur",
    },
  },
  en: {
    header: {
      title: "AI CV Assistant",
      candidateSpace: "Candidate Space",
      recruiterSpace: "Recruiter Space",
      logout: "Log Out",
    },
    languageSwitcher: {
      language: "Language",
    },
    home: {
      title_p1: "Your career,",
      title_p2: "powered by AI",
      subtitle: "Whether you are a candidate looking for the perfect job or a recruiter seeking the perfect talent, our intelligent platform automates and optimizes your journey.",
      getStarted: "Get Started",
      login: "Log In",
      forCandidates: "For Candidates",
      forCandidatesDesc: "Analyze your CV, find relevant job offers, and generate personalized cover letters in just a few clicks.",
      candidatesFeature1: "Instant CV Analysis",
      candidatesFeature2: "Intelligent Job Search",
      candidatesFeature3: "Cover Letter Generation",
      forRecruiters: "For Recruiters",
      forRecruitersDesc: "Describe your needs and let our AI source the best profiles from the web for your open positions.",
      recruitersFeature1: "Automated Talent Sourcing",
      recruitersFeature2: "Access to a Pool of Candidates",
      recruitersFeature3: "Precise Profile-Job Matching",
    },
    testimonials: {
        title: "What they say about us",
        candidateQuote: "The AI found jobs I would have never seen! The interview coach gave me the confidence I needed to ace my interviews. I landed my dream job in two weeks.",
        candidateName: "Sophie Dubois",
        candidateRole: "Full-Stack Developer",
        recruiterQuote: "An incredible time-saver. I found qualified candidates in hours instead of days. The sourcing tool has become essential for my team.",
        recruiterName: "Julien Moreau",
        recruiterRole: "Tech Recruiter",
    },
    login: {
      title: "Login",
      emailLabel: "Email address",
      passwordLabel: "Password",
      submitButton: "Log in",
      socialSeparator: "Or continue with",
      noAccount: "Don't have an account yet?",
      signUpLink: "Sign up",
      errorAllFields: "Please fill in all fields.",
      errorInvalidCredentials: "Incorrect email or password.",
      continueWith: "Continue with {{provider}}",
    },
    signup: {
        title: "Create Account",
        emailLabel: "Email address",
        passwordLabel: "Password",
        confirmPasswordLabel: "Confirm password",
        submitButton: "Sign up",
        socialSeparator: "Or sign up with",
        hasAccount: "Already have an account?",
        loginLink: "Log in",
        errorPasswordMismatch: "Passwords do not match.",
        errorUserExists: "An account with this email already exists.",
        continueWith: "Sign up with {{provider}}",
    },
    hero: {
      title: "Optimize Your Job Search",
      subtitle: "Provide your CV, set your criteria, and let our AI find the best positions and write cover letters for you.",
      step1: "1. Provide your CV",
      tabUpload: "Upload a file",
      tabLinkedIn: "Import from LinkedIn",
      tabManual: "Fill manually",
      dropzoneText: "Drag and drop your file here, or click to select.",
      dropzoneFormats: "Supported formats: PDF, TXT",
      parsingFile: "Analyzing file...",
      fileLoaded: "File loaded",
      pasteCvPlaceholder: "Or paste your CV content here...",
      linkedInDescription: "Enter your public LinkedIn profile URL. Our AI will generate a CV based on this information.",
      step2: "2. Define your search",
      locationLabel: "City or region",
      locationPlaceholder: "E.g., Paris, France",
      contractTypeLabel: "Contract type",
      contractTypeCDI: "Permanent / Temporary",
      contractTypeFreelance: "Freelance",
      contractTypeSubcontracting: "Subcontracting",
      datePostedLabel: "Date posted",
      datePostedAny: "Any time",
      datePostedMonth: "Less than a month",
      submitButton: "Analyze and Find Jobs",
      submitButtonLoading: "Loading CV...",
      errorLinkedInUrl: "Please provide a LinkedIn URL.",
      errorProvideCv: "Please provide a CV.",
      errorManualFormName: "Please fill in at least your name in the manual form.",
      errorLocation: "Please provide a city.",
      errorFileType: "Unsupported file type. Please use a PDF or TXT.",
      errorReadFile: "Error reading the file.",
    },
     manualCv: {
      personalInfoTitle: "Personal Information",
      fullNameLabel: "Full Name",
      emailLabel: "Email",
      phoneLabel: "Phone",
      linkedinUrlLabel: "LinkedIn URL",
      summarySkillsTitle: "Summary & Skills",
      summaryLabel: "Professional Summary",
      skillsLabel: "Skills (comma-separated)",
      experienceTitle: "Work Experience",
      jobTitlePlaceholder: "Job Title",
      companyPlaceholder: "Company",
      durationPlaceholder: "Duration (e.g., 2020-2022)",
      responsibilityPlaceholder: "Responsibility or achievement",
      addResponsibility: "+ Add responsibility",
      addExperience: "+ Add experience",
      educationTitle: "Education",
      degreePlaceholder: "Degree",
      institutionPlaceholder: "Institution",
      addEducation: "+ Add education",
    },
    cvPreview: {
        title: "Preview & Templates",
        downloadAria: "Download CV as PNG",
        downloadButton: "Download (PNG)",
        canvasAria: "CV Preview",
    },
    loading: {
      parsing: "Analyzing your CV...",
      findingJobs: "Searching for job offers...",
    },
     app: {
      errorTitle: "Error!",
      retryButton: "Retry",
    },
     results: {
      title: "Opportunities Found",
      newSearch: "New Search",
      sourcesTitle: "Sources used for this search:",
      noJobsFoundTitle: "No job offers found",
      noJobsFoundDescription: "Try changing your search criteria or providing a more detailed CV for better results.",
    },
    bulkActions: {
      selected: "selected",
      generateLetters: "Generate Letters",
      apply: "Apply (external sites)",
    },
    applicationCard: {
        statusReady: "Ready",
        statusGenerating: "Generating...",
        statusLetterReady: "Letter ready",
        statusAwaiting: "Awaiting",
        statusSent: "Sent",
        statusError: "Error",
        generateLetter: "Generate Letter",
        applicationSent: "Application sent",
        awaitingConfirmation: "Confirming...",
        applyOnSite: "Apply on site",
        seeLess: "See less",
        seeMore: "See more",
        source: "Source",
        viewLetter: "Letter",
        interviewCoach: "Interview Coach",
        sentConfirmation: "Application marked as sent.",
    },
    coverLetter: {
        title: "Cover Letter",
        forPosition: "For the position of",
        atCompany: "at",
        copyButton: "Copy text",
        copiedButton: "Copied!",
        errorButton: "Error",
        closeButton: "Close",
    },
    confirmation: {
      title: "Confirm Application",
      description1: "The job offer page for the position of",
      description2: "After applying on the site, please click the button below to confirm that your application has been sent.",
      cancelButton: "Cancel",
      confirmButton: "Application Sent!",
    },
    bulkConfirmation: {
        title: "Confirm Applications",
        description1_p1: "Several tabs have opened for you to finalize your",
        description1_p2: "application(s) on the recruiters' websites.",
        description2: "After applying on each site, please click the button below to confirm that your applications have been sent.",
        cancelButton: "Cancel",
        confirmButton: "Applications Sent!",
    },
    recruiter: {
        title: "Find the best talent",
        subtitle: "Describe the position you are looking to fill and let our AI find the most relevant candidates for you.",
        jobDescriptionLabel: "Job description or key skills",
        jobDescriptionPlaceholder: "E.g., Senior React Developer with 5 years of experience in large-scale web applications, proficient in TypeScript and GraphQL...",
        locationLabel: "City or country (optional)",
        locationPlaceholder: "E.g., Lyon, France",
        searchButton: "Search for candidates",
        searchButtonLoading: "Searching...",
        resultsTitle: "Search results",
        noCandidatesTitle: "No candidates found",
        noCandidatesDescription: "Try rephrasing your search or providing more details for better results.",
        loadingTitle: "Searching for candidates...",
        loadingDescription: "The AI is analyzing the web to find the best profiles. This may take a moment.",
        errorJobDescription: "Please provide a job description or title.",
        errorUnknown: "An unknown error occurred.",
    },
    candidateCard: {
        source: "Source",
        linkedinProfile: "LinkedIn Profile",
    },
    interview: {
        title: "AI Interview Coach",
        subtitle: "Simulation for the position of",
        listening: "Listening...",
        start: "Start Session",
        connecting: "Connecting...",
        end: "End Session",
        error: "Error",
    },
  },
  ar: {
    header: {
      title: "مساعد السيرة الذاتية بالذكاء الاصطناعي",
      candidateSpace: "مساحة المرشح",
      recruiterSpace: "مساحة مسؤول التوظيف",
      logout: "تسجيل الخروج",
    },
    languageSwitcher: {
      language: "اللغة",
    },
    home: {
      title_p1: "مسيرتك المهنية،",
      title_p2: "مدعومة بالذكاء الاصطناعي",
      subtitle: "سواء كنت مرشحًا تبحث عن الوظيفة المثالية أو مسؤول توظيف يبحث عن الموهبة المثالية، منصتنا الذكية تؤتمت وتحسن رحلتك.",
      getStarted: "ابدأ الآن",
      login: "تسجيل الدخول",
      forCandidates: "للمرشحين",
      forCandidatesDesc: "حلل سيرتك الذاتية، واعثر على عروض ذات صلة، وأنشئ خطابات تقديم مخصصة ببضع نقرات فقط.",
      candidatesFeature1: "تحليل فوري للسيرة الذاتية",
      candidatesFeature2: "بحث ذكي عن الوظائف",
      candidatesFeature3: "إنشاء خطابات التقديم",
      forRecruiters: "لمسؤولي التوظيف",
      forRecruitersDesc: "صف احتياجاتك ودع الذكاء الاصطناعي الخاص بنا يعثر على أفضل الملفات الشخصية من الويب لمناصبك الشاغرة.",
      recruitersFeature1: "تحديد مصادر المواهب آليًا",
      recruitersFeature2: "الوصول إلى مجموعة من المرشحين",
      recruitersFeature3: "مطابقة دقيقة بين الملف الشخصي والوظيفة",
    },
    testimonials: {
        title: "ماذا يقولون عنا",
        candidateQuote: "وجد الذكاء الاصطناعي وظائف لم أكن لأراها أبدًا! مدرب المقابلات أعطاني الثقة التي أحتاجها للنجاح في مقابلاتي. حصلت على وظيفة أحلامي في أسبوعين.",
        candidateName: "صوفيا دوبوا",
        candidateRole: "مطورة Full-Stack",
        recruiterQuote: "توفير لا يصدق للوقت. وجدت مرشحين مؤهلين في ساعات بدلاً من أيام. أصبحت أداة البحث عن المصادر ضرورية لفريقي.",
        recruiterName: "جوليان مورو",
        recruiterRole: "مسؤول توظيف تقني",
    },
    login: {
      title: "تسجيل الدخول",
      emailLabel: "عنوان البريد الإلكتروني",
      passwordLabel: "كلمة المرور",
      submitButton: "تسجيل الدخول",
      socialSeparator: "أو المتابعة باستخدام",
      noAccount: "ليس لديك حساب بعد؟",
      signUpLink: "أنشئ حسابًا",
      errorAllFields: "يرجى ملء جميع الحقول.",
      errorInvalidCredentials: "البريد الإلكتروني أو كلمة المرور غير صحيحة.",
      continueWith: "المتابعة باستخدام {{provider}}",
    },
    signup: {
        title: "إنشاء حساب",
        emailLabel: "عنوان البريد الإلكتروني",
        passwordLabel: "كلمة المرور",
        confirmPasswordLabel: "تأكيد كلمة المرور",
        submitButton: "إنشاء حساب",
        socialSeparator: "أو التسجيل باستخدام",
        hasAccount: "لديك حساب بالفعل؟",
        loginLink: "تسجيل الدخول",
        errorPasswordMismatch: "كلمتا المرور غير متطابقتين.",
        errorUserExists: "يوجد حساب بهذا البريد الإلكتروني بالفعل.",
        continueWith: "التسجيل باستخدام {{provider}}",
    },
    hero: {
      title: "حسّن بحثك عن عمل",
      subtitle: "قدم سيرتك الذاتية، وحدد معاييرك، ودع ذكاءنا الاصطناعي يجد لك أفضل الوظائف ويكتب خطابات التقديم.",
      step1: "1. قدم سيرتك الذاتية",
      tabUpload: "تحميل ملف",
      tabLinkedIn: "استيراد من لينكد إن",
      tabManual: "تعبئة يدوية",
      dropzoneText: "اسحب وأفلت ملفك هنا، أو انقر للاختيار.",
      dropzoneFormats: "الصيغ المدعومة: PDF, TXT",
      parsingFile: "جارٍ تحليل الملف...",
      fileLoaded: "تم تحميل الملف",
      pasteCvPlaceholder: "أو الصق محتوى سيرتك الذاتية هنا...",
      linkedInDescription: "أدخل عنوان URL لملفك الشخصي العام على LinkedIn. سيقوم الذكاء الاصطناعي لدينا بإنشاء سيرة ذاتية بناءً على هذه المعلومات.",
      step2: "2. حدد بحثك",
      locationLabel: "المدينة أو المنطقة",
      locationPlaceholder: "مثال: باريس، فرنسا",
      contractTypeLabel: "نوع العقد",
      contractTypeCDI: "دائم / مؤقت",
      contractTypeFreelance: "مستقل",
      contractTypeSubcontracting: "تعاقد من الباطن",
      datePostedLabel: "تاريخ النشر",
      datePostedAny: "في أي وقت",
      datePostedMonth: "أقل من شهر",
      submitButton: "تحليل والبحث عن وظائف",
      submitButtonLoading: "جارٍ تحميل السيرة الذاتية...",
      errorLinkedInUrl: "يرجى تقديم عنوان URL لملف LinkedIn.",
      errorProvideCv: "يرجى تقديم سيرة ذاتية.",
      errorManualFormName: "يرجى ملء اسمك على الأقل في النموذج اليدوي.",
      errorLocation: "يرجى تقديم مدينة.",
      errorFileType: "نوع ملف غير مدعوم. يرجى استخدام PDF أو TXT.",
      errorReadFile: "خطأ في قراءة الملف.",
    },
    manualCv: {
      personalInfoTitle: "المعلومات الشخصية",
      fullNameLabel: "الاسم الكامل",
      emailLabel: "البريد الإلكتروني",
      phoneLabel: "الهاتف",
      linkedinUrlLabel: "رابط لينكد إن",
      summarySkillsTitle: "الملخص والمهارات",
      summaryLabel: "ملخص احترافي",
      skillsLabel: "المهارات (مفصولة بفواصل)",
      experienceTitle: "الخبرة المهنية",
      jobTitlePlaceholder: "المسمى الوظيفي",
      companyPlaceholder: "الشركة",
      durationPlaceholder: "المدة (مثال: 2020-2022)",
      responsibilityPlaceholder: "المسؤولية أو الإنجاز",
      addResponsibility: "+ إضافة مسؤولية",
      addExperience: "+ إضافة خبرة",
      educationTitle: "التعليم",
      degreePlaceholder: "الشهادة",
      institutionPlaceholder: "المؤسسة",
      addEducation: "+ إضافة تعليم",
    },
    cvPreview: {
        title: "معاينة وقوالب",
        downloadAria: "تنزيل السيرة الذاتية بصيغة PNG",
        downloadButton: "تنزيل (PNG)",
        canvasAria: "معاينة السيرة الذاتية",
    },
    loading: {
      parsing: "جارٍ تحليل سيرتك الذاتية...",
      findingJobs: "جارٍ البحث عن عروض عمل...",
    },
    app: {
      errorTitle: "خطأ!",
      retryButton: "إعادة المحاولة",
    },
    results: {
      title: "الفرص التي تم العثور عليها",
      newSearch: "بحث جديد",
      sourcesTitle: "المصادر المستخدمة في هذا البحث:",
      noJobsFoundTitle: "لم يتم العثور على عروض عمل",
      noJobsFoundDescription: "حاول تغيير معايير البحث أو تقديم سيرة ذاتية أكثر تفصيلاً للحصول على نتائج أفضل.",
    },
    bulkActions: {
      selected: "محدد",
      generateLetters: "إنشاء الخطابات",
      apply: "تقديم (مواقع خارجية)",
    },
    applicationCard: {
        statusReady: "جاهز",
        statusGenerating: "جارٍ الإنشاء...",
        statusLetterReady: "الخطاب جاهز",
        statusAwaiting: "قيد الانتظار",
        statusSent: "تم الإرسال",
        statusError: "خطأ",
        generateLetter: "إنشاء الخطاب",
        applicationSent: "تم إرسال الطلب",
        awaitingConfirmation: "جارٍ التأكيد...",
        applyOnSite: "التقديم على الموقع",
        seeLess: "عرض أقل",
        seeMore: "عرض المزيد",
        source: "المصدر",
        viewLetter: "الخطاب",
        interviewCoach: "مدرب المقابلات",
        sentConfirmation: "تم تحديد الطلب كمرسل.",
    },
    coverLetter: {
        title: "خطاب التقديم",
        forPosition: "لمنصب",
        atCompany: "في",
        copyButton: "نسخ النص",
        copiedButton: "تم النسخ!",
        errorButton: "خطأ",
        closeButton: "إغلاق",
    },
    confirmation: {
      title: "تأكيد الطلب",
      description1: "تم فتح صفحة عرض الوظيفة لمنصب",
      description2: "بعد التقديم على الموقع، يرجى النقر على الزر أدناه لتأكيد إرسال طلبك.",
      cancelButton: "إلغاء",
      confirmButton: "تم إرسال الطلب!",
    },
    bulkConfirmation: {
        title: "تأكيد الطلبات",
        description1_p1: "تم فتح عدة علامات تبويب لك لإنهاء",
        description1_p2: "طلب (طلبات) على مواقع أصحاب العمل.",
        description2: "بعد التقديم على كل موقع، يرجى النقر على الزر أدناه لتأكيد إرسال طلباتك.",
        cancelButton: "إلغاء",
        confirmButton: "تم إرسال الطلبات!",
    },
    recruiter: {
        title: "ابحث عن أفضل المواهب",
        subtitle: "صف المنصب الذي تبحث عن مرشح له ودع الذكاء الاصطناعي يجد لك أنسب المرشحين.",
        jobDescriptionLabel: "وصف الوظيفة أو المهارات الرئيسية",
        jobDescriptionPlaceholder: "مثال: مطور React خبير بخبرة 5 سنوات في تطبيقات الويب الكبيرة، يتقن TypeScript و GraphQL...",
        locationLabel: "المدينة أو البلد (اختياري)",
        locationPlaceholder: "مثال: ليون، فرنسا",
        searchButton: "ابحث عن مرشحين",
        searchButtonLoading: "جارٍ البحث...",
        resultsTitle: "نتائج البحث",
        noCandidatesTitle: "لم يتم العثور على مرشحين",
        noCandidatesDescription: "حاول إعادة صياغة بحثك أو تقديم المزيد من التفاصيل للحصول على نتائج أفضل.",
        loadingTitle: "جارٍ البحث عن مرشحين...",
        loadingDescription: "يقوم الذكاء الاصطناعي بتحليل الويب للعثور على أفضل الملفات الشخصية. قد يستغرق هذا بعض الوقت.",
        errorJobDescription: "يرجى تقديم وصف وظيفي أو مسمى وظيفي.",
        errorUnknown: "حدث خطأ غير معروف.",
    },
    candidateCard: {
        source: "المصدر",
        linkedinProfile: "ملف لينكد إن",
    },
    interview: {
        title: "مدرب المقابلات بالذكاء الاصطناعي",
        subtitle: "محاكاة لمنصب",
        listening: "جارٍ الاستماع...",
        start: "بدء الجلسة",
        connecting: "جارٍ الاتصال...",
        end: "إنهاء الجلسة",
        error: "خطأ",
    },
  },
};

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string, replacements?: Record<string, string>) => string;
}
const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider = ({ children }: { children: React.ReactNode }) => {
    const [language, setLanguage] = useState<Language>('fr');

    const t = useCallback((key: string, replacements?: Record<string, string>): string => {
        const keys = key.split('.');
        
        const findTranslation = (lang: Language) => {
            let result: any = translations[lang];
            for (const k of keys) {
                result = result?.[k];
                if (result === undefined) return undefined;
            }
            return result;
        };

        let translation = findTranslation(language) || findTranslation('en') || key;

        if (replacements) {
            Object.keys(replacements).forEach(rKey => {
                translation = translation.replace(`{{${rKey}}}`, replacements[rKey]);
            });
        }

        return translation;
    }, [language]);

    const value = useMemo(() => ({ language, setLanguage, t }), [language, t]);

    // Fix: Replaced JSX with React.createElement to avoid syntax errors in a .ts file.
    return React.createElement(LanguageContext.Provider, { value }, children);
};

export const useTranslations = () => {
    const context = useContext(LanguageContext);
    if (context === undefined) {
        throw new Error('useTranslations must be used within a LanguageProvider');
    }
    return context;
};

export const availableLanguages = languages;